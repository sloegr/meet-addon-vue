var e=typeof global<`u`?global:typeof self<`u`?self:typeof window<`u`?window:{};(function(){var e=Object.defineProperty;function t(e){e=[typeof globalThis==`object`&&globalThis,e,typeof window==`object`&&window,typeof self==`object`&&self,typeof global==`object`&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error(`Cannot find global object`)}var n=t(this);function r(t,r){if(r)a:{var i=n;t=t.split(`.`);for(var a=0;a<t.length-1;a++){var o=t[a];if(!(o in i))break a;i=i[o]}t=t[t.length-1],a=i[t],r=r(a),r!=a&&r!=null&&e(i,t,{configurable:!0,writable:!0,value:r})}}r(`Symbol.dispose`,function(e){return e||Symbol(`Symbol.dispose`)});var i=this||self;function a(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function o(e,t){function n(){}n.prototype=t.prototype,e.qa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.oa=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function s(e,t){if(Error.captureStackTrace)Error.captureStackTrace(this,s);else{let e=Error().stack;e&&(this.stack=e)}e&&(this.message=String(e)),t!==void 0&&(this.cause=t)}o(s,Error),s.prototype.name=`CustomError`;function c(e){i.setTimeout(()=>{throw e},0)}var l,u;a:{for(var ee=[`CLOSURE_FLAGS`],te=i,ne=0;ne<ee.length;ne++)if(te=te[ee[ne]],te==null){u=null;break a}u=te}l=(u&&u[610401301])??!1;var re;let ie=i.navigator;re=ie&&ie.userAgentData||null;function ae(e){return l&&re?re.brands.some(({brand:t})=>t&&t.indexOf(e)!=-1):!1}function d(e){var t;a:{if((t=i.navigator)&&(t=t.userAgent))break a;t=``}return t.indexOf(e)!=-1}function f(){return l?!!re&&re.brands.length>0:!1}function oe(){return f()?ae(`Chromium`):(d(`Chrome`)||d(`CriOS`))&&!(!f()&&d(`Edge`))||d(`Silk`)}function se(e,t){t=Array.prototype.indexOf.call(e,t,void 0),t>=0&&Array.prototype.splice.call(e,t,1)}!d(`Android`)||oe(),oe(),d(`Safari`)&&(oe()||!f()&&d(`Coast`)||!f()&&d(`Opera`)||!f()&&d(`Edge`)||(f()?ae(`Microsoft Edge`):d(`Edg/`))||f()&&ae(`Opera`));function ce(e){let t=``,n=0,r=e.length-10240;for(;n<r;)t+=String.fromCharCode.apply(null,e.subarray(n,n+=10240));return t+=String.fromCharCode.apply(null,n?e.subarray(n):e),btoa(t)}let le=/[-_.]/g,ue={"-":`+`,_:`/`,".":`=`};function de(e){return ue[e]||``}function fe(e){return e!=null&&e instanceof Uint8Array}var pe={};function me(){return ge||=new he(null,pe)}var he=class{constructor(e,t){if(_e(t),this.g=e,e!=null&&e.length===0)throw Error(`ByteString should be constructed with non-empty values`)}};let ge;function _e(e){if(e!==pe)throw Error(`illegal external caller`)}function ve(e,t){e.__closure__error__context__984382||={},e.__closure__error__context__984382.severity=t}let ye;function be(){let e=Error();ve(e,`incident`),c(e)}function xe(e){return e=Error(e),ve(e,`warning`),e}function Se(){return typeof BigInt==`function`}function Ce(e){return Array.prototype.slice.call(e)}function p(e,t){return t&&Symbol.for&&e?Symbol.for(e):e==null?Symbol():Symbol(e)}var m=p(`jas`,!0);p();var we=p(),Te=p();p(),p();function Ee(e,t){t[m]=(e|0)&-30975}function De(e,t){t[m]=(e|34)&-30941}var Oe={},ke={};function Ae(e){return!(!e||typeof e!=`object`||e.g!==ke)}function je(e){return typeof e==`object`&&!!e&&!Array.isArray(e)&&e.constructor===Object}function Me(e,t){if(e!=null){if(typeof e==`string`)e=e?new he(e,pe):me();else if(e.constructor!==he)if(fe(e))e=e.length?new he(new Uint8Array(e),pe):me();else{if(!t)throw Error();e=void 0}}return e}function Ne(e){return!Array.isArray(e)||e.length?!1:!!((e[m]|0)&1)}var Pe;let Fe=[];Fe[m]=55,Pe=Object.freeze(Fe);function Ie(e){if(e&2)throw Error()}var Le=Object.freeze({});function Re(e){return e.pa=!0,e}var ze=Re(e=>typeof e==`number`),Be=Re(e=>typeof e==`string`),Ve=Re(e=>typeof e==`boolean`),He=typeof i.BigInt==`function`&&typeof i.BigInt(0)==`bigint`,Ue=Re(e=>He?e>=Ge&&e<=qe:e[0]===`-`?Je(e,We):Je(e,Ke));let We=(-(2**53-1)).toString(),Ge=He?BigInt(-(2**53-1)):void 0,Ke=(2**53-1).toString(),qe=He?BigInt(2**53-1):void 0;function Je(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r>i)return!1;if(r<i)return!0}}let h=0,g=0;function Ye(e){let t=e>>>0;h=t,g=(e-t)/4294967296>>>0}function Xe(e){if(e<0){Ye(-e);let[t,n]=$e(h,g);h=t>>>0,g=n>>>0}else Ye(e)}function Ze(e,t){if(t>>>=0,e>>>=0,t<=2097151)var n=``+(4294967296*t+e);else Se()?n=``+(BigInt(t)<<BigInt(32)|BigInt(e)):(n=(e>>>24|t<<8)&16777215,t=t>>16&65535,e=(e&16777215)+n*6777216+t*6710656,n+=t*8147497,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+Qe(n)+Qe(e));return n}function Qe(e){return e=String(e),`0000000`.slice(e.length)+e}function $e(e,t){return t=~t,e?e=~e+1:t+=1,[e,t]}function et(e){if(e==null||typeof e==`boolean`)return e;if(typeof e==`number`)return!!e}let tt=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function nt(e){let t=typeof e;switch(t){case`bigint`:return!0;case`number`:return Number.isFinite(e)}return t===`string`?tt.test(e):!1}function _(e){if(e!=null){if(!Number.isFinite(e))throw xe(`enum`);e|=0}return e}function rt(e){if(e!=null&&typeof e==`string`){if(!e)return;e=+e}}function it(e){if(e!=null)a:{if(!nt(e))throw xe(`int64`);switch(typeof e){case`string`:e=ot(e);break a;case`bigint`:var t=e=BigInt.asIntN(64,e);if(Be(t)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(t))throw Error(String(t))}else if(ze(t)&&!Number.isSafeInteger(t))throw Error(String(t));e=He?BigInt(e):Ve(e)?e?`1`:`0`:Be(e)?e.trim()||`0`:String(e);break a;default:e=at(e)}}return e}function at(e){if(e=Math.trunc(e),!Number.isSafeInteger(e)){Xe(e);var t=h,n=g;(e=n&2147483648)&&(t=~t+1>>>0,n=~n>>>0,t==0&&(n=n+1>>>0));let r=n*4294967296+(t>>>0);t=Number.isSafeInteger(r)?r:Ze(t,n),e=typeof t==`number`?e?-t:t:e?`-`+t:t}return e}function ot(e){var t=Math.trunc(Number(e));if(Number.isSafeInteger(t))return String(t);if(t=e.indexOf(`.`),t!==-1&&(e=e.substring(0,t)),!(e[0]===`-`?e.length<20||e.length===20&&Number(e.substring(0,7))>-922337:e.length<19||e.length===19&&Number(e.substring(0,6))<922337)){if(e.length<16)Xe(Number(e));else if(Se())e=BigInt(e),h=Number(e&BigInt(4294967295))>>>0,g=Number(e>>BigInt(32)&BigInt(4294967295));else{t=+(e[0]===`-`),g=h=0;let n=e.length;for(let r=t,i=(n-t)%6+t;i<=n;r=i,i+=6){let t=Number(e.slice(r,i));g*=1e6,h=h*1e6+t,h>=4294967296&&(g+=Math.trunc(h/4294967296),g>>>=0,h>>>=0)}if(t){let[e,t]=$e(h,g);h=e,g=t}}if(e=h,t=g,t&2147483648)if(Se())e=``+(BigInt(t|0)<<BigInt(32)|BigInt(e>>>0));else{let[n,r]=$e(e,t);e=`-`+Ze(n,r)}else e=Ze(e,t)}return e}function v(e){if(e!=null&&typeof e!=`string`)throw Error();return e}function st(e,t,n){if(typeof e==`object`&&e&&e.H===Oe)return e;if(Array.isArray(e)){var r=e[m]|0,i=r;return i===0&&(i|=n&32),i|=n&2,i!==r&&(e[m]=i),new t(e)}}function ct(e){mt===void 0&&(mt=typeof Proxy==`function`?gt(Proxy):null);var t;return(t=!mt)||(ht===void 0&&(ht=typeof WeakMap==`function`?gt(WeakMap):null),t=!ht),t?e:(t=ft(e))?t:Math.random()>.01?e:(vt(e),t=new mt(e,{set(e,t,n){return lt(),e[t]=n,!0}}),pt(e,t),t)}function lt(){be()}let ut,dt;function ft(e){return ut?.get(e)}function pt(e,t){(ut||=new ht).set(e,t),(dt||=new ht).set(t,e)}let mt,ht;function gt(e){try{return e.toString().indexOf(`[native code]`)===-1?null:e}catch{return null}}let _t;function vt(e){if(_t===void 0){let e=new mt([],{});_t=Array.prototype.concat.call([],e).length===1}_t&&typeof Symbol==`function`&&Symbol.isConcatSpreadable&&(e[Symbol.isConcatSpreadable]=!0)}function yt(e,t){return bt(t)}function bt(e){switch(typeof e){case`number`:return isFinite(e)?e:String(e);case`bigint`:return Ue(e)?Number(e):String(e);case`boolean`:return e?1:0;case`object`:if(e)if(Array.isArray(e)){if(Ne(e))return}else{if(fe(e))return ce(e);if(e instanceof he){let t=e.g;return t==null?``:typeof t==`string`?t:e.g=ce(t)}}}return e}function xt(e,t,n){e=Ce(e);var r=e.length;let i=t&256?e[r-1]:void 0;for(r+=i?-1:0,t=t&512?1:0;t<r;t++)e[t]=n(e[t]);if(i)for(let r in t=e[t]={},i)t[r]=n(i[r]);return e}function St(e,t,n,r,i){if(e!=null){if(Array.isArray(e))e=Ne(e)?void 0:i&&(e[m]|0)&2?e:Ct(e,t,n,r!==void 0,i);else if(je(e)){let a={};for(let o in e)a[o]=St(e[o],t,n,r,i);e=a}else e=t(e,r);return e}}function Ct(e,t,n,r,i){let a=r||n?e[m]|0:0;r=r?!!(a&32):void 0,e=Ce(e);for(let a=0;a<e.length;a++)e[a]=St(e[a],t,n,r,i);return n&&n(a,e),e}function wt(e){return e.H===Oe?e.toJSON():bt(e)}function Tt(e,t,n=De){if(e!=null){if(e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var r=e[m]|0;return r&2?e:(t&&=r===0||!!(r&32)&&!(r&64||!(r&16)),t?(e[m]=(r|34)&-12293,e):Ct(e,Tt,r&4?De:n,!0,!0))}return e.H===Oe&&(n=e.m,r=n[m],e=r&2?e:new e.constructor(Et(n,r,!0))),e}}function Et(e,t,n){let r=n||t&2?De:Ee,i=!!(t&32);return e=xt(e,t,e=>Tt(e,i,r)),e[m]=e[m]|32|(n?2:0),e}function Dt(e){let t=e.m,n=t[m];return n&2?new e.constructor(Et(t,n,!1)):e}function y(e,t){return e=e.m,b(e,e[m],t)}function Ot(e,t,n,r){if(t=r+(!!(t&512)-1),!(t<0||t>=e.length||t>=n))return e[t]}function b(e,t,n,r){if(n===-1)return null;let i=t>>15&1023||536870912;if(n>=i){if(t&256)return e[e.length-1][n]}else{var a=e.length;if(r&&t&256&&(r=e[a-1][n],r!=null)){if(Ot(e,t,i,n)&&we!=null){var o;e=(o=ye)??(ye={}),o=e[we]||0,o>=4||(e[we]=o+1,be())}return r}return Ot(e,t,i,n)}}function kt(e,t,n){let r=e.m,i=r[m];return Ie(i),x(r,i,t,n),e}function x(e,t,n,r){let i=t>>15&1023||536870912;if(n>=i){let a,o=t;if(t&256)a=e[e.length-1];else{if(r==null)return o;a=e[i+(!!(t&512)-1)]={},o|=256}return a[n]=r,n<i&&(e[n+(!!(t&512)-1)]=void 0),o!==t&&(e[m]=o),o}return e[n+(!!(t&512)-1)]=r,t&256&&(e=e[e.length-1],n in e&&delete e[n]),t}function S(e,t,n,r){return n=T(e,r)===n?n:-1,Mt(e,t,n)!==void 0}function C(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function w(e,t,n,r){let i=e.m,a=i[m];return Ie(a),x(i,a,t,(r===`0`?Number(n)===0:n===r)?void 0:n),e}function T(e,t){return e=e.m,jt(At(e),e,e[m],t)}function At(e){return e[Te]??(e[Te]=new Map)}function jt(e,t,n,r){let i=e.get(r);if(i!=null)return i;i=0;for(let e=0;e<r.length;e++){let a=r[e];b(t,n,a)!=null&&(i!==0&&(n=x(t,n,i)),i=a)}return e.set(r,i),i}function Mt(e,t,n,r){e=e.m;let i=e[m];return r=b(e,i,n,r),t=st(r,t,i),t!==r&&t!=null&&x(e,i,n,t),t}function Nt(e,t,n){if(t=Mt(e,t,n,!1),t==null)return t;e=e.m;let r=e[m];if(!(r&2)){let i=Dt(t);i!==t&&(t=i,x(e,r,n,t))}return t}function E(e,t,n){return n??=void 0,kt(e,t,n)}function D(e,t,n,r){r??=void 0;a:{let o=e.m;var i=o[m];if(Ie(i),r==null){var a=At(o);if(jt(a,o,i,n)===t)a.set(n,0);else break a}else{a=o;let e=At(a),r=jt(e,a,i,n);r!==t&&(r&&(i=x(a,i,r)),e.set(n,t))}x(o,i,t,r)}return e}function Pt(e,t){let n=e.m,r=n[m];if(Ie(r),t==null)return x(n,r,1),e;var i=t,a;t=(a=dt)?.get(i)||i,a=i=t[m]|0;let o=C(i),s=o||Object.isFrozen(t),c=!0,l=!0;for(let e=0;e<t.length;e++){var u=t[e];o||(u=!!((u.m[m]|0)&2),c&&=!u,l&&=u)}return o||(i=c?13:5,i=l?i|16:i&-17),s&&i===a||(t=Ce(t),a=0,i=Ft(i,r),i=It(i,r,!0)),i!==a&&(t[m]=i),x(n,r,1,t),e}function Ft(e,t){return e=(2&t?e|2:e&-3)|32,e&=-2049}function It(e,t,n){return 32&t&&n||(e&=-33),e}function O(e,t){return e??t}function Lt(e){return e=y(e,1),e!=null&&(typeof e==`bigint`?Ue(e)?e=Number(e):(e=BigInt.asIntN(64,e),e=Ue(e)?Number(e):String(e)):e=nt(e)?typeof e==`number`?at(e):ot(e):void 0),O(e,0)}function k(e,t){return e=y(e,t),O(e==null||typeof e==`string`?e:void 0,``)}function A(e,t){return e=y(e,t),e=e==null?e:Number.isFinite(e)?e|0:void 0,O(e,0)}function j(e,t,n,r){return n=T(e,r)===n?n:-1,Nt(e,t,n)}let M;function Rt(e){try{return M=!0,JSON.stringify(Bt(e),yt)}finally{M=!1}}function zt(){var e=vi||=Ht(`[1,2,0]`);e=Dt(e),e=kt(e,4,v(`dev-706864954`));let t=e.m,n=t[m];return n&2?e:new e.constructor(Et(t,n,!0))}var N=class{constructor(e){a:{var t=t??0;if(e==null){var n=96;e=[]}else{if(!Array.isArray(e))throw Error(`narr`);if(n=e[m]|0,n&2048)throw Error(`farr`);if(n&64)break a;t===1||t===2||(n|=64),t=e;var r=t.length;if(r&&(--r,je(t[r]))){if(n|=256,t=r-(!!(n&512)-1),t>=1024)throw Error(`pvtlmt`);n=n&-33521665|(t&1023)<<15}}e[m]=n}this.m=e}toJSON(){return Bt(this)}};N.prototype.H=Oe,N.prototype.toString=function(){try{return M=!0,Bt(this).toString()}finally{M=!1}};function Bt(e){e=e.m,e=M?e:Ct(e,wt,void 0,void 0,!1);{var t=!M;let l=e.length;if(l){var n=e[l-1],r=je(n);r?l--:n=void 0;var i=e;if(r){b:{var a=n,o,s=!1;if(a)for(let e in a)isNaN(+e)?(o??={})[e]=a[e]:(r=a[e],Array.isArray(r)&&(Ne(r)||Ae(r)&&r.size===0)&&(r=null),r??(s=!0),r!=null&&((o??={})[e]=r));if(s||(o=a),o)for(let e in o){s=o;break b}s=null}a=s==null?n!=null:s!==n}for(;l>0&&(o=i[l-1],o==null||Ne(o)||Ae(o)&&o.size===0);l--)var c=!0;(i!==e||a||c)&&(t?(c||a||s)&&(i.length=l):i=Array.prototype.slice.call(i,0,l),s&&i.push(s)),c=i}else c=e}return c}function Vt(e){return t=>{if(t==null||t==``)t=new e;else{if(t=JSON.parse(t),!Array.isArray(t))throw Error(`dnarr`);t[m]|=32,t=new e(t)}return t}}var Ht=function(e){return t=>{if(t=JSON.parse(t),!Array.isArray(t)){var n=typeof t;throw Error(`Expected jspb data to be an array, got `+(n==`object`?t?Array.isArray(t)?`array`:n:`null`:n)+`: `+t)}return t[m]|=34,new e(t)}}(class extends N{}),Ut=class extends N{};function Wt(e){var t=new Yt(500);let n=0,r;return(...i)=>{Kt(t)?e(...i):(r=()=>void e(...i),n||=setTimeout(()=>{n=0;let e;(e=r)==null||e()},qt(t)))}}function Gt(e){var t=new Yt(100),n=Promise.resolve();return(...r)=>Kt(t)?e(...r):n}function Kt(e){return Jt(e,e.index)>=e.g?(e.h[e.index]=Date.now(),e.index=(e.index+1)%1,!0):!1}function qt(e){let t=e.g;return e=Jt(e,e.index),e>=t?0:t-e}function Jt(e,t){return Date.now()-(e.h[t]??-1*e.g)}var Yt=class{constructor(e){this.g=e,this.h=[],this.index=0}},Xt=class extends N{},Zt=[2,3],Qt=class extends N{},P=class extends Error{constructor({errorType:e,message:t,i:n}){super(`Meet Add-on SDK error: ${`${t}${n?` - ${n}`:``}`}`),this.errorType=e}},F={errorType:`InternalError`,message:`An unexpected error has occurred.`,i:`No further information is available.`},$t={errorType:`MissingUrlParameter`,message:`Missing required Meet SDK URL parameter`,i:`This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not strip URL parameters (e.g. as part of a redirect).`},en={errorType:`NeedsMainStageContext`,message:`This method can only be invoked if the addon is running in the main stage.`,i:`Use getFrameType to check whether the addon is running in the main stage before invoking this method.`},tn={errorType:`NeedsSidePanelContext`,message:`This method can only be invoked if the addon is running in the side panel.`,i:`Use getFrameType to check whether the addon is running in the side panel before invoking this method.`},nn={errorType:`NotSupportedInStandalone`,message:`This method is not supported in standalone mode.`,i:`Do not call this method in standalone mode.`},rn={errorType:`InternalError`,message:`The frame type URL parameter is set to an unexpected value.`,i:`This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect).`},an={errorType:`InvalidCloudProjectNumber`,message:`Cloud Project Number provided by meet does not match the one passed in by the SDK. Ensure that the correct Cloud Project Number is passed to the SDK as a string.`,i:`This parameter is automatically appended by Meet to the iframe URL. Ensure that your infrastructure does not modify URL parameters (e.g. as part of a redirect) and ensure that the correct Cloud Project Number was passed into the SDK as a string.`},on={errorType:`DestinationNotReady`,message:`The recipient frame is not connected via the addon SDK and cannot receive the notification.`,i:`Make sure the destination frame has connected before sending messages to it.`},sn={errorType:`InvalidActivityStartingState`,message:`Origin of the ActivityStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.`,i:`Ensure that the ActivityStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest.`},cn={errorType:`ActivityStartingStateMissingAttributes`,message:`The supplied ActivityStartingState object does not contain any recognized attributes.`,i:`Ensure that the ActivityStartingState object contains at least one of the following attributes: mainStageUrl, sidePanelUrl, additionalData.`},ln={errorType:`ActivityStartingStateUnrecognizedAttributes`,message:`The supplied ActivityStartingState object contains attributes that are not recognized.`,i:`Ensure that the ActivityStartingState object has only the following attributes: mainStageUrl, sidePanelUrl, additionalData.`},un={errorType:`AddonStartingStateMissingAttributes`,message:`The supplied AddonStartingState object does not contain any recognized attributes.`,i:`Ensure that the AddonStartingState object contains at least one of the following attributes: sidePanelUrl, additionalData.`},dn={errorType:`AddonStartingStateUnrecognizedAttributes`,message:`The supplied AddonStartingState object contains attributes that are not recognized.`,i:`Ensure that the AddonStartingState object has only the following attributes: sidePanelUrl, additionalData.`},fn=e=>({errorType:`ArgumentNullError`,message:`The argument supplied for '${e}' was 'null' but a value was expected.`,i:`Ensure you are passing a value of the expected type for the argument.`}),I=(e,t,n)=>({errorType:`ArgumentTypeError`,message:`The type '${t}' of argument supplied for '${e}' did not match the expected type '${n}'.`,i:`Ensure the type of the argument provided matches the expected type.`}),pn=e=>({errorType:`InternalError`,message:`Could not connect to ${e} channel. Unknown error`,i:`No further information is available.`}),mn={errorType:`ActivityIsOngoing`,message:`Operation cannot be performed while an activity is ongoing.`,i:`Ensure that no activity is ongoing.`},hn={errorType:`InternalError`,message:`Frame message missing required Meet SDK command.`,i:`Send one of the available commands in the frame message.`},gn={errorType:`NoActivityFound`,message:`No activity found.`,i:`Ensure that the activity is started before performing this operation.`},_n={errorType:`RequiresEapEnrollment`,message:`This feature is only available to early access partners.`,i:`Meet add-on early access enrollment is currently closed.`},vn={errorType:`UserNotInitiator`,message:`Operation cannot be performed because the user is not the initiator of the current activity.`,i:`Ensure that the user is the initiator of the current activity or that the activity has ended.`},yn={errorType:`SizeLimitExceededActivityStartingState`,message:`The size of the activityStartingState URLs and/or its data exceed the limits allowed.`,i:`Ensure that the activityStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters.`},bn={errorType:`SizeLimitExceededFrameToFrameMessage`,message:`The size of the frame to frame message exceeds the limits allowed.`,i:`Ensure that the frame to frame message size is less than 1,000,000 characters.`},xn={errorType:`AddonSessionAlreadyCreated`,message:`The addon session has already been created.`,i:`Only instantiate the AddonSession once.`},Sn={errorType:`UserCancelled`,message:`The user cancelled starting an activity.`,i:`The user needs to click continue to start the activity.`},Cn={errorType:`NotSupportedInMeetCall`,message:`This method is not supported during a Meet call.`,i:`Do not call this method during a Meet call.`},wn={errorType:`InvalidAddonStartingState`,message:`Origin of the AddonStartingState iframeURLs does not match the origin of the URLs provided in the Add-on manifest.`,i:`Ensure that the AddonStartingState iframeURL origins match the origins of the URLs provided in the Add-on manifest.`},Tn={errorType:`SizeLimitExceededAddonStartingState`,message:`The size of the AddonStartingState URLs and/or its data exceed the limits allowed.`,i:`Ensure that the AddonStartingState URL size is less than 512 characters and the additional data size is less than 4096 characters.`},En={errorType:`MeetingPolicyPreventsStartingActivity`,message:`A meeting policy (such as using host control settings) prevents the user from starting the activity.`,i:`Have a meeting host or administrator modify the necessary settings to allow the current user to start the activity.`};function Dn(e){switch(e){case 0:return F;case 1:return on;case 2:return sn;case 3:return mn;case 4:return hn;case 5:return _n;case 6:return nn;case 7:return vn;case 8:return yn;case 9:return bn;case 10:return Sn;case 11:return Cn;case 12:return wn;case 13:return Tn;case 14:return gn;case 15:return En;default:return F}}function On(e){var t=A(e,1)??0;switch(e=kn(T(e,Zt)),t){case 1:return{errorType:`InternalError`,message:`Could not connect to ${e} channel. Meet did not respond with a MessagePort.`,i:`No further information is available.`};case 2:return{errorType:`InternalError`,message:`Could not connect to ${e}. A conflicting ${e} exists.`,i:`No further information is available.`};case 3:return{errorType:`InternalError`,message:`Could not connect to ${e} channel. The addon does not have permission to open a ${e}.`,i:`This method might require EAP enrollment.`};case 4:return{errorType:`InternalError`,message:`Could not connect to ${e} channel. The addon is not authorized for this ${e}.`,i:`No further information is available.`};case 0:return pn(e);case 5:a:switch(e){case`co`:t={errorType:`InternalError`,message:`Could not connect to ${e} channel. The coActivity was not found.`,i:`Consider starting the ${e} only after after the startActivity promise returns.`};break a;default:t={errorType:`InternalError`,message:`Could not connect to ${e} channel.`,i:`No further information is available.`}}return t;default:return pn(e)}}function kn(e){switch(e){case 2:return`co`;case 3:return`gd`;case 0:return`unknown`;default:return`unknown`}}function L({errorType:e,message:t,i:n},r=``){throw new P({errorType:e,message:r?`${t} ${r}`:t,i:n})}function An(e,t){L({...$t,message:`${$t.message}: ${e}. In URL ${t}`})}function jn(e){return w(new Pn,1,_(e),0)}function Mn(e,t){return w(e,2,v(t),``)}function Nn(e,t){return w(e,3,v(t),``)}var Pn=class extends N{getFrameType(){return A(this,1)}};function Fn(e){var t=Le===void 0?2:4,n=e.m[m],r=n,i=!(2&n),a=Pn;e=e.m,t=(n=!!(2&r))?1:t,i&&=!n,n=b(e,r,1),n=Array.isArray(n)?n:Pe;var o=n[m]|0,s=!!(4&o);if(!s){var c=o;c===0&&(c=Ft(c,r)),o=n,c|=1;var l=r;let e=!!(2&c);e&&(l|=2);let t=!e,i=!0,s=0,u=0;for(;s<o.length;s++){let n=st(o[s],a,l);if(n instanceof a){if(!e){let e=!!((n.m[m]|0)&2);t&&=!e,i&&=e}o[u++]=n}}u<s&&(o.length=u),c|=4,c=i?c|16:c&-17,c=t?c|8:c&-9,o[m]=c,e&&Object.freeze(o),o=c}if(i&&!(8&o||!n.length&&(t===1||t===4&&32&o))){for(C(o)&&(n=Ce(n),o=Ft(o,r),r=x(e,r,1,n)),i=n,a=o,o=0;o<i.length;o++)c=i[o],l=Dt(c),c!==l&&(i[o]=l);a|=8,a=i.length?a&-17:a|16,o=i[m]=a}let u;if(t===1||t===4&&32&o){if(!C(o)){r=o;var ee=!!(32&o);o|=!n.length||16&o&&(!s||ee)?2:2048,o!==r&&(n[m]=o),Object.freeze(n)}}else s=t===5?!!(32&o)||C(o)||!!ft(n):!1,(t===2||s)&&C(o)&&(n=Ce(n),o=Ft(o,r),o=It(o,r,!1),n[m]=o,r=x(e,r,1,n)),C(o)||(e=o,o=It(o,r,!1),o!==e&&(n[m]=o)),s?u=ct(n):t===2&&((ee=ut)==null||ee.delete(n));return u||n}function In(e){return Pt(new Ln,e)}var Ln=class extends N{},Rn=class extends N{};function zn(e){return w(new Bn,1,_(e),0)}var Bn=class extends N{},Vn=class extends N{},Hn=class extends N{},Un=class extends N{},Wn=class extends N{getMeetingInfo(){return j(this,Un,3,Gn)}getMeetPlatformInfo(){return j(this,Hn,4,Gn)}},Gn=[2,3,4,5],Kn=class extends N{},R=[1,4,5,6,7,8,9,10,11,12,13,14,15,16,17],qn=class extends N{},Jn=class extends N{},Yn=new Map([[2,`MAIN_STAGE`],[1,`SIDE_PANEL`]]),Xn=new Map([[0,`UNKNOWN`],[1,`OPEN_ADDON`],[2,`START_ACTIVITY`],[3,`JOIN_ACTIVITY`]]);function Zn(e){e&&typeof e.dispose==`function`&&e.dispose()}function z(){this.s=this.s,this.g=this.g}z.prototype.s=!1,z.prototype.dispose=function(){this.s||(this.s=!0,this.G())},z.prototype[Symbol.dispose]=function(){this.dispose()};function Qn(e,t){e.s?t():(e.g||=[],e.g.push(t))}z.prototype.G=function(){if(this.g)for(;this.g.length;)this.g.shift()()};function $n({J:e,R:t}){if(e===null)throw new P(fn(`activityStartingState`));if(t||e!==void 0){if(typeof e!=`object`)throw new P(I(`activityStartingState`,typeof e,`object${t?``:` | undefined`}`));if(e.mainStageUrl!==void 0&&typeof e.mainStageUrl!=`string`)throw new P(I(`mainStageUrl`,typeof e.mainStageUrl,`string | undefined`));if(e.sidePanelUrl!==void 0&&typeof e.sidePanelUrl!=`string`)throw new P(I(`sidePanelUrl`,typeof e.sidePanelUrl,`string | undefined`));if(e.additionalData!==void 0&&typeof e.additionalData!=`string`)throw new P(I(`additionalData`,typeof e.additionalData,`string | undefined`));if(Object.keys(e).length!==+!!e.mainStageUrl+ +!!e.sidePanelUrl+ +!!e.additionalData)throw new P(ln);if(Object.keys(e).length===0)throw new P(cn)}}function er(e){let t=[];return t.push(Nn(Mn(jn(2),e.mainStageUrl),e.additionalData)),t.push(Nn(Mn(jn(1),e.sidePanelUrl),e.additionalData)),t}var tr=class extends z{constructor(e){super(),this.context=e,this.h={},ci(this.context.g.U,e=>{switch(T(e.content,R)){case 7:let n=this.h.frameToFrameMessage;if(e=j(e.content,Vn,7,R),n&&e){var t=A(e,1);if(t=Yn.get(t),t===void 0)throw Error(`Unknown frame type.`);n({originator:t,payload:k(e,2)})}}})}async getMeetingInfo(){let e=await Ei(this.context.g,zn(2));return{meetingId:k(e.getMeetingInfo(),1),meetingCode:k(e.getMeetingInfo(),2)}}async getFrameOpenReason(){let e=this.context.h.ca??0;return Xn.get(e)??`UNKNOWN`}async getActivityStartingState(){var e=j(await Ei(this.context.g,zn(1)),Ln,2,Gn);let t=e==null?void 0:Fn(e).find(e=>e.getFrameType()===2);return e=e==null?void 0:Fn(e).find(e=>e.getFrameType()===1),{mainStageUrl:(t==null?void 0:k(t,2))||void 0,sidePanelUrl:(e==null?void 0:k(e,2))||void 0,additionalData:(e==null?void 0:k(e,3))||void 0}}async setActivityStartingState(e){$n({J:e,R:!0});var t=er(e);e=Di;var n=this.context.g,r=new qn;t=In(t),r=E(r,1,t),await e(n,r)}on(e,t){this.h[e]=t}async getMeetPlatformInfo(){return{isMeetHardware:O(et(y((await Ei(this.context.g,zn(3))).getMeetPlatformInfo(),1)),!1)}}async closeAddon(){await Oi(this.context.g)}async startActivity(e){$n({J:e,R:!1});let t=new Jn;e&&(e=er(e),e=In(e),E(t,1,e)),await ki(this.context.g,t)}async endActivity(e){var t=Ai,n=this.context.g;e=w(new Rn,1,_(e===`aab61ee0-51b4-475d-aa4d-849f2498640d`?999:0),0),await t(n,e)}},nr=Vt(class extends N{getFrameOpenReason(){return A(this,5)}});function rr(){var e=window.location.href,t=window.location.href,n=new URL(t).searchParams.get(`meet_sdk`);if(n?t=nr(atob(n)):(An(`meet_sdk`,t),t=void 0),(n=k(t,1))||An(`meet_addon_frame_type`,e),n=Number(n),n!==2&&n!==1)throw new P(rn);let r=k(t,2);r||An(`meet_control_channel_name`,e);let i=k(t,4);i||An(`addon_cloud_project_number`,e);var a;return e=(a=t.getFrameOpenReason())??0,a=k(t,3)||`https://meet.google.com`,{ca:e,frameType:n,ba:r,cloudProjectNumber:i,S:a}}var ir=class extends N{},ar=class extends N{};function or(){return D(new sr,1,cr,new ar)}var sr=class extends N{},cr=[1,2];function lr(e){return E(new dr,2,e)}function ur(e,t){return w(e,3,v(t),``)}var dr=class extends N{},fr=class extends N{},pr=class extends N{},mr=class extends N{},hr=class extends N{},gr=class extends N{setAddonStartingState(e){return E(this,1,e)}},_r=class extends N{};function vr(e,t){return D(e,2,V,t)}var B=class extends N{},V=[1,2,5,6,7,8,9,10,11,13,14,15,16],yr=class extends N{},br=Vt(yr),H=[1,2];class xr{constructor(e,t){this.data=e,this.channel=t}}var Sr=Promise;function Cr(e){let t=new MessageChannel;return Er(t.port1,e),t}function wr(e,t){return Er(e,t),new Tr(e)}class Tr{constructor(e){this.g=e}send(e,t,n=[]){t=Cr(t),this.g.postMessage(e,[t.port2].concat(n))}C(e,t){return new Sr(n=>{this.send(e,n,t)})}}function Er(e,t){t&&(e.onmessage=e=>{var n=e.data;e=wr(e.ports[0]),t(new xr(n,e))})}var Dr=typeof AsyncContext<`u`&&typeof AsyncContext.Snapshot==`function`?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function Or(e,t){e.l(t),e.h<100&&(e.h++,t.next=e.g,e.g=t)}class kr{constructor(e,t){this.j=e,this.l=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.j(),e}}function Ar(){var e=Ir;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class jr{constructor(){this.h=this.g=null}add(e,t){let n=Mr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var Mr=new kr(()=>new Nr,e=>e.reset());class Nr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let Pr,Fr=!1,Ir=new jr,Lr=(e,t)=>{Pr||Rr(),Fr||=(Pr(),!0),Ir.add(e,t)},Rr=()=>{let e=Promise.resolve(void 0);Pr=()=>{e.then(zr)}};function zr(){let e;for(;e=Ar();){try{e.h.call(e.g)}catch(e){c(e)}Or(Mr,e)}Fr=!1}function Br(){}function U(e){if(this.g=0,this.T=void 0,this.l=this.h=this.j=null,this.v=this.B=!1,e!=Br)try{let t=this;e.call(void 0,function(e){W(t,2,e)},function(e){W(t,3,e)})}catch(e){W(this,3,e)}}function Vr(){this.next=this.context=this.h=this.l=this.g=null,this.j=!1}Vr.prototype.reset=function(){this.context=this.h=this.l=this.g=null,this.j=!1};var Hr=new kr(function(){return new Vr},function(e){e.reset()});function Ur(e,t,n){let r=Hr.get();return r.l=e,r.h=t,r.context=n,r}function Wr(){let e,t;return new ni(new U(function(n,r){e=n,t=r}),e,t)}U.prototype.then=function(e,t,n){return Jr(this,Dr(typeof e==`function`?e:null),Dr(typeof t==`function`?t:null),n)},U.prototype.$goog_Thenable=!0;function Gr(e,t){t=Dr(t),t=Ur(t,t),t.j=!0,qr(e,t)}U.prototype.cancel=function(e){if(this.g==0){let t=new G(e);Lr(function(){Kr(this,t)},this)}};function Kr(e,t){if(e.g==0)if(e.j){var n=e.j;if(n.h){var r=0,i=null,a=null;for(let t=n.h;t&&(t.j||(r++,t.g==e&&(i=t),!(i&&r>1)));t=t.next)i||(a=t);i&&(n.g==0&&r==1?Kr(n,t):(a?(r=a,r.next==n.l&&(n.l=r),r.next=r.next.next):Zr(n),Qr(n,i,3,t)))}e.j=null}else W(e,3,t)}function qr(e,t){e.h||e.g!=2&&e.g!=3||Xr(e),e.l?e.l.next=t:e.h=t,e.l=t}function Jr(e,t,n,r){let i=Ur(null,null,null);return i.g=new U(function(e,a){i.l=t?function(n){try{e(t.call(r,n))}catch(e){a(e)}}:e,i.h=n?function(t){try{let i=n.call(r,t);i===void 0&&t instanceof G?a(t):e(i)}catch(e){a(e)}}:a}),i.g.j=e,qr(e,i),i.g}U.prototype.ma=function(e){this.g=0,W(this,2,e)},U.prototype.na=function(e){this.g=0,W(this,3,e)};function W(e,t,n){if(e.g==0){e===n&&(t=3,n=TypeError(`Promise cannot resolve to itself`)),e.g=1;a:{var r=n,i=e.ma,a=e.na;if(r instanceof U){qr(r,Ur(i||Br,a||null,e));var o=!0}else{if(r)try{var s=!!r.$goog_Thenable}catch{s=!1}else s=!1;if(s)r.then(i,a,e),o=!0;else{if(s=typeof r,s==`object`&&r!=null||s==`function`)try{let t=r.then;if(typeof t==`function`){Yr(r,t,i,a,e),o=!0;break a}}catch(t){a.call(e,t),o=!0;break a}o=!1}}}o||(e.T=n,e.g=t,e.j=null,Xr(e),t!=3||n instanceof G||ei(e,n))}}function Yr(e,t,n,r,i){function a(e){s||(s=!0,r.call(i,e))}function o(e){s||(s=!0,n.call(i,e))}let s=!1;try{t.call(e,o,a)}catch(e){a(e)}}function Xr(e){e.B||(e.B=!0,Lr(e.la,e))}function Zr(e){let t=null;return e.h&&(t=e.h,e.h=t.next,t.next=null),e.h||(e.l=null),t}U.prototype.la=function(){let e;for(;e=Zr(this);)Qr(this,e,this.g,this.T);this.B=!1};function Qr(e,t,n,r){if(n==3&&t.h&&!t.j)for(;e&&e.v;e=e.j)e.v=!1;if(t.g)t.g.j=null,$r(t,n,r);else try{t.j?t.l.call(t.context):$r(t,n,r)}catch(e){ti.call(null,e)}Or(Hr,t)}function $r(e,t,n){t==2?e.l.call(e.context,n):e.h&&e.h.call(e.context,n)}function ei(e,t){e.v=!0,Lr(function(){e.v&&ti.call(null,t)})}var ti=c;function G(e){s.call(this,e)}o(G,s),G.prototype.name=`cancel`;function ni(e,t,n){this.promise=e,this.resolve=t,this.reject=n}let ri=1,ii=new WeakMap;function ai(e,t,n){var r=si;e.h.has(t),r(t,n)}var oi=class extends z{constructor(){super(),this.h=new Set}signal(){let e=new ui;return this.h.add(e),Qn(this,a(Zn,e)),e}};function si(e,t){return new Promise(n=>{K(()=>{e.L&&(e.ea=t,e.P=!0);for(let{I:n,slot:r}of e.o.values())try{r(t,{signal:e,I:n})}catch(e){c(e)}for(let n of e.A)n.resolve(t);e.A.clear(),n()})})}function ci(e,t,n){let r=ri++;return K(()=>{li(e,r,t,n)}),r}function li(e,t,n,r){if(!e.s)if(r){if(!r.s){let i=()=>{K(()=>{e.o.delete(t);let n=ii.get(r);n&&se(n,i)})};e.o.set(t,{I:t,slot:n,F:i}),hi(r,i)}}else e.o.set(t,{I:t,slot:n,F:()=>e.o.delete(t)})}var ui=class extends z{constructor(){super(),this.L=!1,this.o=new Map,this.A=new Set,this.P=!1}detach(e){K(()=>{let t=this.o.get(e);t&&t.F()})}value(e){return this.promise(!0,e)}next(e){return this.promise(!1,e)}promise(e,t){let n=Wr();return K(()=>{if(this.s)n.reject(new G(`Signal initially disposed`));else if(t&&t.s)n.reject(new G(`Owner initially disposed`));else if(e&&this.L&&this.P)n.resolve(this.ea);else if(this.A.add(n),Gr(n.promise,()=>{this.A.delete(n)}),t){let e=()=>{n.reject(new G(`Owner asynchronously disposed`))};Gr(n.promise,()=>{let n=ii.get(t);n&&se(n,e)}),hi(t,e)}}),n.promise}G(){super.G(),K(()=>{for(let{F:e}of this.o.values())e();this.o.clear();for(let e of this.A)e.reject(new G(`Signal asynchronously disposed`));this.A.clear()})}};let di=[],fi=!1;function K(e){di.push(e),pi()}async function pi(){if(!fi)try{fi=!0;let e=mi(0);for(;e<di.length;)await Promise.resolve(),e=mi(e)}catch(e){c(e)}finally{di.length=0,fi=!1}}function mi(e){let t=e+100;for(;e<t&&e<di.length;)try{di[e++]()}catch(e){c(e)}return e}function hi(e,t){if(e.s)t();else{var n=ii.get(e);if(n)n.push(t);else{let n=[t];ii.set(e,n),Qn(e,()=>{for(let e of[...n])e();ii.delete(e)})}}}function q(e){return e=D(new yr,1,H,e),{content:Rt(e)}}let gi=new oi;function _i(e,t){let n=gi.signal();return{channel:wr(e,e=>{ai(gi,n,{content:t(e.data),ka:e})}),signal:n}}let vi;var J=class extends N{},Y=class extends N{},yi=class extends N{h(){return j(this,J,2,bi)}g(){return S(this,J,2,bi)}j(){return j(this,Y,3,bi)}l(){return S(this,Y,3,bi)}},bi=[2,3],xi=Vt(class extends N{}),Si=Vt(class extends N{}),Ci=[1,2],wi=({destination:e,origin:t,ra:n,Y:r=`ZNWN1d`,onMessage:i})=>{if(t===`*`)throw Error(`Sending to wildcard origin not allowed.`);let a=Cr(i);return e.postMessage(n?{n:r,t:n}:r,t,[a.port2]),wr(a.port1,i)};function Ti(e,t,n){let r=new oi,i=r.signal();return e=wi({destination:window.parent,origin:t,Y:e,onMessage:e=>{let t=br(e.data.content);T(t,H)===2&&ai(r,i,{content:j(t,Kn,2,H),ka:e,messagePort:e.data.messagePort})}}),new Ri(i,e,n)}async function Ei(e,t){var n=X;t=D(new B,9,V,t),e=await n(e,q(t));let r;return(r=j(br(e.data.content),Kn,2,H))==null?void 0:j(r,Wn,9,R)}async function Di(e,t){var n=X;t=D(new B,8,V,t),await n(e,q(t))}async function Oi(e){var t=X,n=new B,r=new ir;n=D(n,11,V,r),await t(e,q(n))}async function ki(e,t){var n=X;t=D(new B,14,V,t),await n(e,q(t))}async function Ai(e,t){var n=X;t=D(new B,15,V,t),await n(e,q(t))}async function ji(e){await e.h()}async function X(e,t){(e=await e.channel.C(t))||L(F,`Falsy response received from the message channel. ${JSON.stringify(e)}`),(t=e.data)||L(F,`Data field in the response from the message channel is falsy. ${JSON.stringify(t)}`),(t=t.content)||L(F,`Content field in the response from the message channel is falsy. ${JSON.stringify(t)}`);let n;try{n=br(t)}catch(e){L(F,`The ControlMessage can't be deserialized. ${JSON.stringify(t)}. ${JSON.stringify(e)}`)}if((t=j(n,Kn,2,H))||L(F,`MeetToAddonMessage field on ControlMessage is falsy. ${JSON.stringify(t)}`),t=t==null?void 0:j(t,Qt,10,R),(t==null?void 0:A(t,1))!==void 0)throw new P(Dn(A(t,1)));return e}async function Mi(e,t,n){var r=X;t=D(new B,1,V,t),r=await r(e,q(t)),e=r.data.messagePort;var i;return(r=(i=j(br(r.data.content),Kn,2,H))==null?void 0:j(i,Xt,1,R))==null?(i=new Xt,i=w(i,1,_(0),0)):i=r,{channel:e?_i(e,n):void 0,response:i}}async function Ni(e){let{channel:t,response:n}=await Mi(e,or(),e=>Si(e));if(!t)throw new P(On(n));return t}async function Pi(e){var t=X,n=new B,r=new _r;n=D(n,5,V,r),await t(e,q(n))}async function Fi(e){var t=X,n=new B,r=new fr;n=D(n,6,V,r),await t(e,q(n))}async function Ii(e,t,n){var r=X,i=new B;t=w(new pr,1,_(t),0),n=w(t,2,v(n),``),i=D(i,7,V,n),await r(e,q(i))}async function Li(e,t){var n=X;t=D(new B,16,V,t),await n(e,q(t))}class Ri extends z{constructor(e,t,n){super(),this.U=e,this.channel=t,this.h=Gt(async()=>{var e=this.channel,t=e.C,n=new B,r=new mr;n=D(n,13,V,r),await t.call(e,q(n))}),e=zt(),k(e,4),rt(y(e,1)),rt(y(e,2)),rt(y(e,3)),n=vr(new B,ur(lr(e),n)),this.channel.send(q(n)),ci(this.U,async e=>{switch(T(e.content,R)){case 16:await ji(this)}})}}let zi;var Bi=class{constructor(e){var t=zi;this.h=e,this.g=t}delete(){throw Error(`Not implemented.`)}},Vi=class extends N{h(){return j(this,J,2,Hi)}g(){return S(this,J,2,Hi)}j(){return j(this,Y,3,Hi)}l(){return S(this,Y,3,Hi)}},Hi=[2,3],Ui=class extends N{},Wi=class extends N{},Gi=class extends N{},Ki=class extends N{h(){return j(this,J,2,qi)}g(){return S(this,J,2,qi)}j(){return j(this,Y,3,qi)}l(){return S(this,Y,3,qi)}},qi=[2,3],Ji=[5,6],Yi=class extends N{},Xi=class extends N{},Zi=[1,2,3],Qi=class extends Error{constructor(){super(`Failed to create CoActivity: Connection refused - Meet refused to begin Live Sharing`)}},$i=class{constructor(e){this.config=e}start(){return this.g??=setInterval(()=>{this.config.ha()},this.config.da),this}shutdown(){clearInterval(this.g)}};function ea(){let e=new Map,t={set(n,r){return e.set(n,r),t},D:()=>e};return t}function ta(e){if(e.g()){e=e.h().m;var t=e[m],n=b(e,t,1),r=Me(n,!0);if(r!=null&&r!==n&&x(e,t,1,r),e=r,t=e??me(),e=Uint8Array,_e(pe),n=t.g,n!=null&&!fe(n))if(typeof n==`string`){le.test(n)&&(n=n.replace(le,de)),n=atob(n),r=new Uint8Array(n.length);for(let e=0;e<n.length;e++)r[e]=n.charCodeAt(e);n=r}else n=null;return t=n==null?n:t.g=n,{bytes:new e(t||0)}}}function na(e,t){return t=ia(t),D(e,2,qi,t),e}function ra(e,t){return t=ia(t),D(e,2,Hi,t),e}function ia(e){return w(new J,1,Me(e.bytes,!1),me())}function aa(e){if(e.l()){e=e.j();var t,n,r=k(e,1),i=(n=(t=Nt(e,Ut,2))==null?void 0:Lt(t))??0;n=e.m;let a=n[m],o=b(n,a,4);return t=o==null||typeof o==`number`?o:o===`NaN`||o===`Infinity`||o===`-Infinity`?Number(o):void 0,t!=null&&t!==o&&x(n,a,4,t),{mediaId:r,mediaPlayoutPosition:i,mediaPlayoutRate:O(t,0),playbackState:ca.get(A(e,3))}}}function oa(e,t){return t=ua(t),D(e,3,qi,t),e}function sa(e,t){return t=ua(t),D(e,3,Hi,t),e}let ca=ea().set(0,`INVALID`).set(1,`BUFFERING`).set(2,`PLAY`).set(3,`PAUSE`).set(4,`ENDED`).D(),la=ea().set(`INVALID`,0).set(`BUFFERING`,1).set(`PLAY`,2).set(`PAUSE`,3).set(`ENDED`,4).D();function ua(e){var t=new Y;t=w(t,1,v(e.mediaId),``);var n=e.mediaPlayoutRate;if(n!=null&&typeof n!=`number`)throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);return t=w(t,4,n,0),n=new Ut,n=w(n,1,it(e.mediaPlayoutPosition),`0`),t=E(t,2,n),e=la.get(e.playbackState),w(t,3,_(e),0)}function da({activityTitle:e}){return kt(new Gi,4,v(e))}function fa(e,t){return t=w(new Wi,1,_(t.u),0),D(e,6,Ji,t),e}function pa(e){return D(e,5,Ji,new Ui),e}let ma=ea().set(`co-doing`,1).set(`co-watching`,2).D();async function ha(e,t,n){var r=t.C,i=new Xi,a=new Yi;a=w(a,1,v(e.activityTitle),``);var o=ma.get(e.K);a=w(a,2,_(o),0),i=D(i,3,Zi,a),r=await r.call(t,i,xi);let s;if((s=O(et(y(r,1)),!1))!=null&&s)return new _a(e,t,n,Nt(r,yi,2));throw new Qi}function ga(e,t){let n=e.config.N(t);n&&!e.config.M(e.g,n)&&(e.g=n,e.j=Lt(t),e.v(e.g))}function Z(e,t){let{state:n,fa:r,context:i}=t(e.g);e.g=n,e.notify(e.g,i,r)}class _a{constructor(e,t,n,r){this.l=e,this.h=t,this.config=n,this.v=Wt(e=>void this.l.O(e)),Sa(this.h,e=>{let t=T(e,Ci);switch(t){case 1:ga(this,j(e,yi,1,Ci));break;case 2:case 0:console.warn(`IllegalMessage: ${t} - Unhandled message - Please raise a bug with the MeetJS team`)}}),this.B=new $i({da:1e3,ha:()=>{var e,t,n=(t=(e=this.l).ja)?.call(e);if(this.g!==null){this.g={...this.g,...n},e=new Xi,t=this.config,n=t.W;var r=new Vi;r=w(r,1,it(this.j),`0`),t=n.call(t,r,this.g),e=D(e,1,Zi,t),this.h.send(e)}}}).start(),this.g=null,this.j=0,r&&ga(this,r)}disconnect(){this.h.shutdown(),this.B.shutdown()}notify(e,t,n){var r=n?da(n):void 0;n=this.config;var i=n.X,a=new Ki;a=w(a,1,it(this.j),`0`),r=E(a,4,r),e=i.call(n,r,e),e=this.config.V(e,t),t=this.h,n=t.send,i=new Xi,e=D(i,2,Zi,e),n.call(t,e)}}var va=class{constructor(e){this.g=e}broadcastStateUpdate(e){Z(this.g,()=>({state:e,context:{}}))}disconnect(){this.g.disconnect()}};function ya(e,t){return e==null||t==null?!1:e.bytes.length===t.bytes.length&&e.bytes.every((e,n)=>e===t.bytes[n])}var ba=class{constructor(e){this.g=e}notifySwitchedToMedia(e,t,n){Z(this.g,()=>({state:{mediaId:t,mediaPlayoutRate:1,mediaPlayoutPosition:n,playbackState:`PLAY`},fa:{activityTitle:e},context:{u:1}}))}notifyPauseState(e,t){Z(this.g,n=>{if(n==null)throw Error(`Invalid before coWatchingState`);return{state:{...n,playbackState:e?`PAUSE`:`PLAY`,mediaPlayoutPosition:t},context:{u:3}}})}notifySeekToTimestamp(e){Z(this.g,t=>{if(t==null)throw Error(`Invalid before coWatchingState`);return{state:{...t,mediaPlayoutPosition:e},context:{u:2}}})}notifyPlayoutRate(e){Z(this.g,t=>{if(t==null)throw Error(`Invalid before coWatchingState`);return{state:{...t,mediaPlayoutRate:e},context:{u:4}}})}notifyBuffering(e){Z(this.g,t=>{if(t==null)throw Error(`Invalid before coWatchingState`);return{state:{...t,mediaPlayoutPosition:e,playbackState:`BUFFERING`},context:{u:3}}})}notifyReady(e){Z(this.g,t=>{if(t==null)throw Error(`Invalid before coWatchingState`);return{state:{...t,mediaPlayoutPosition:e},context:{u:3}}})}disconnect(){this.g.disconnect()}};function xa(e,t){if(e==null||t==null)return!1;let n=e.playbackState===`PLAY`?3*Math.max(e.mediaPlayoutRate,1):0,r=Math.abs(e.mediaPlayoutPosition-t.mediaPlayoutPosition);return e.mediaId===t.mediaId&&e.mediaPlayoutRate===t.mediaPlayoutRate&&r<=n&&e.playbackState===t.playbackState}function Sa(e,t){let n=ci(e.signal,e=>{t(e)});e.o.push(n)}var Ca=class{constructor(e,t){this.channel=e,this.signal=t,this.o=[]}send(e){this.channel.send(Rt(e))}async C(e,t){return e=await this.channel.C(Rt(e)),t(e.data)}shutdown(){this.o.forEach(e=>{this.signal.detach(e)})}};function wa(e,t){var n=ka;let r=e.signal(),i=e.signal();return ci(t,t=>{ai(e,n(t)?r:i,t)},e),{ia:r,ga:i}}function Ta(e,t,n,r=e=>e){ci(n,n=>{ai(e,t,r(n))},e)}async function Ea(e,t){if(t)return e=await ha({activityTitle:t.activityTitle,K:`co-watching`,ja:()=>t.onCoWatchingStateQuery(),O:e=>{t.onCoWatchingStateChanged(e)}},e,{X:oa,W:sa,V:fa,N:aa,M:xa}),new ba(e)}async function Da(e,t){if(t)return e=await ha({activityTitle:t.activityTitle,K:`co-doing`,O:e=>{t.onCoDoingStateChanged(e)}},e,{X:na,W:ra,V:pa,N:ta,M:ya}),new va(e)}async function Oa(e){let t=new oi,n=t.signal();e=await e,Ta(t,n,e.signal,e=>e.content);let{ia:r,ga:i}=wa(t,n);return{Z:new Ca(e.channel,r),aa:new Ca(e.channel,i)}}function ka(e){a:switch(T(e,Ci)){case 1:e=j(e,yi,1,Ci);break a;default:throw Error(`CA Message arrived with no known content message set`)}return e.g()}async function Aa(e,t){if({Z:e}=await Oa(Ni(e.g)),t=await Da(e,t),!t)throw Error(`Failed to create co-doing session`);return t}async function ja(e,t){if({aa:e}=await Oa(Ni(e.g)),t=await Ea(e,t),!t)throw Error(`Failed to create co-watching session`);return t}var Ma=class extends tr{async notifySidePanel(e){await Ii(this.context.g,1,e)}async unloadSidePanel(){await Pi(this.context.g)}async loadSidePanel(){await Fi(this.context.g)}},Na=class extends tr{async setAddonStartingState(e){if(e===null)throw new P(fn(`addonStartingState`));if(typeof e!=`object`)throw new P(I(`addonStartingState`,typeof e,`object | undefined`));if(e.sidePanelUrl!==void 0&&typeof e.sidePanelUrl!=`string`)throw new P(I(`sidePanelUrl`,typeof e.sidePanelUrl,`string | undefined`));if(e.additionalData!==void 0&&typeof e.additionalData!=`string`)throw new P(I(`additionalData`,typeof e.additionalData,`string | undefined`));if(Object.keys(e).length!==+!!e.sidePanelUrl+ +!!e.additionalData)throw new P(dn);if(Object.keys(e).length===0)throw new P(un);var t=[];t.push(Nn(Mn(jn(1),e.sidePanelUrl),e.additionalData)),e=this.context.g;var n=new gr,r=n.setAddonStartingState;t=Pt(new hr,t),await Li(e,r.call(n,t))}},Pa=class extends tr{async notifyMainStage(e){await Ii(this.context.g,2,e)}},Fa=class{constructor(e){e=e.cloudProjectNumber;let t=rr();if(t.cloudProjectNumber!==e)throw new P(an);let n=t.S,r=t.ba;zi??=Ti(r,n,e),this.g=new Bi(t)}async createMainStageClient(){var e=this.g;if(e.h.frameType!==2)throw new P(en);return await Promise.resolve(new Ma(e))}async createSidePanelClient(){var e=this.g;if(e.h.frameType!==1)throw new P(tn);return await Promise.resolve(new Pa(e))}async createCoWatchingClient(e){return await ja(this.g,e)}async createCoDoingClient(e){return await Aa(this.g,e)}async createRoomsStandaloneClient(){var e=this.g;if(e.h.frameType!==2)throw new P(en);return await Promise.resolve(new Na(e))}};let Ia=null;var La={addon:{getFrameType:function(){a:{var e=rr().frameType;switch(e){case 2:e=`MAIN_STAGE`;break a;case 1:e=`SIDE_PANEL`;break a;default:throw Error(`Unknown frame type: ${e}`)}}return e},createAddonSession:async function(e){if(e===null)throw new P(fn(`config`));if(typeof e!=`object`)throw new P(I(`config`,typeof e,`object`));if(typeof e.cloudProjectNumber!=`string`)throw new P(I(`cloudProjectNumber`,typeof e.cloudProjectNumber,`string`));if(Ia&&rr().S!==`integration.test.google.com`)throw new P(xn);return Ia=new Fa(e)}}},Ra=[`meet`],Q=i;Ra[0]in Q||Q.execScript===void 0||Q.execScript(`var `+Ra[0]);for(var $;Ra.length&&($=Ra.shift());)Ra.length||La===void 0?Q=Q[$]&&Q[$]!==Object.prototype[$]?Q[$]:Q[$]={}:Q[$]=La}).apply(e);const t=e.meet;export{t as meet};