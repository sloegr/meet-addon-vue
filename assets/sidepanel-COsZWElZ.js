import{a as e,c as t,d as n,i as r,l as i,n as a,o,r as s,s as c,t as l,u}from"./preload-helper-BHOYQAOM.js";var d=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},f={class:`side-panel`},p={key:0,class:`error`},m={key:1,class:`success`},h=d({__name:`App`,setup(a){let d=u(``),h=u(``),g=u(null),_=u(null),v=u(null),y=u(!1),b=u(null),x=()=>{if(b.value=null,g.value=null,!d.value){b.value=`Please input a Google Cloud Client ID before logging in`;return}if(typeof google>`u`||!google.accounts?.oauth2){b.value=`Google Identity Services library is not loaded.`,console.error(b.value);return}google.accounts.oauth2.initTokenClient({client_id:d.value,scope:`https://www.googleapis.com/auth/meetings.space.created https://www.googleapis.com/auth/meetings.conference.media.readonly https://www.googleapis.com/auth/meetings.space.readonly`,callback:e=>{console.log(`Token response:`,e),_.value=e,g.value=`Login successful!`},error_callback:e=>{console.error(`Login error:`,e),b.value=`Login failed. Error: ${e.type||`Unknown error`}`}}).requestAccessToken()},S=async()=>{try{let{meet:e}=await l(async()=>{let{meet:e}=await import(`./meet.addons-BQL6rvfn.js`);return{meet:e}},[]);v.value=await(await e.addon.createAddonSession({cloudProjectNumber:`893187114358`})).createSidePanelClient(),y.value=!0,console.log(`✓ Side panel initialized successfully`)}catch(e){console.log(`Not running in Google Meet:`,e.message),y.value=!1}},C=async()=>{if(b.value=null,g.value=null,!h.value){b.value=`Please enter a meeting code.`;return}try{let e=await fetch(`https://bot.msteams.letstalksign.org:5000/api/join`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({clientCode:d.value,meetingCode:h.value})});if(!e.ok){let t=await e.text();throw Error(`API request failed: ${e.status} ${t}`)}let t=await e.json();g.value=t.message,console.log(`Success:`,t)}catch(e){console.error(`API call failed:`,e),b.value=e.message}},w=async()=>{if(!v.value){b.value=`Not connected to Google Meet`;return}try{await v.value.startActivity({mainStageUrl:`https://sloegr.github.io/meet-addon-vue/MainStage.html`}),console.log(`✓ Main stage launched successfully`),b.value=null}catch(e){console.error(`Failed to launch main stage:`,e),b.value=`Failed to launch: `+e.message}};return c(()=>{S()}),(a,c)=>(t(),o(`div`,f,[c[2]||=r(`h1`,null,`Side Panel`,-1),c[3]||=r(`p`,null,`This is the add-on Side Panel. Only you can see this.`,-1),c[4]||=r(`label`,{for:`clientCode`},`Client Code: `,-1),i(r(`input`,{type:`text`,id:`clientCode`,name:`clientCode`,"onUpdate:modelValue":c[0]||=e=>d.value=e},null,512),[[s,d.value]]),c[5]||=r(`br`,null,null,-1),c[6]||=r(`br`,null,null,-1),r(`button`,{onClick:x},`Login`),c[7]||=r(`br`,null,null,-1),c[8]||=r(`br`,null,null,-1),c[9]||=r(`label`,{for:`meetingCode`},`Meeting Code: `,-1),i(r(`input`,{type:`text`,id:`meetingCode`,name:`meetingCode`,"onUpdate:modelValue":c[1]||=e=>h.value=e},null,512),[[s,h.value]]),c[10]||=r(`br`,null,null,-1),c[11]||=r(`br`,null,null,-1),r(`button`,{onClick:C},`Join Meeting`),c[12]||=r(`br`,null,null,-1),c[13]||=r(`br`,null,null,-1),r(`button`,{onClick:w,class:`launch-button`},`Launch Activity in Main Stage`),b.value?(t(),o(`div`,p,n(b.value),1)):e(``,!0),g.value?(t(),o(`div`,m,n(g.value),1)):e(``,!0)]))}},[[`__scopeId`,`data-v-33ebf213`]]);console.log(`Side Panel loading...`),a(h).mount(`#app`),console.log(`Side Panel mounted successfully`);